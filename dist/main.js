!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e),s.d(e,"allProjects",(function(){return it}));const i=new WeakMap;class o{constructor(t=[]){i.set(this,t)}add(t,e=-1){const s=i.get(this),o=s.length;if(-1==e)s.push(t);else{if(e<0||e>o)throw new Error("index is out of range");s.splice(e,0,t)}i.set(this,s)}delete(t=-1){let e=i.get(this);if(-1!=t){if(t<0||t>=e.length)throw new Error("index out of range");e.splice(t,1)}else e.pop();i.set(this,e)}del(t){const e=i.get(this);if(t){const s=e.indexOf(t);if(-1==s)throw new Error("item is not in the list");this.delete(s)}}erase(){this.arr=[]}set arr(t){i.set(this,t)}get arr(){return i.get(this)}get count(){return i.get(this).length}}const n=document.querySelector(".todo"),a=n.querySelector("#title"),r=n.querySelector("#description"),c=n.querySelector("#duedate"),l=n.querySelector("#priority"),h=n.querySelector("#notes");const d=document.querySelector(".todos"),u=document.querySelector(".projects"),p=new class{constructor(){this.todo=null}output(t){t&&(this.todo=t,a.value=t.title,r.value=t.description,c.value=t.dueDate.toISOString().slice(0,10),l.value=t.priority,h.value=t.notes.join("\n"))}input(t){t&&(t.title=a.value,t.description=r.value,c.value?t.dueDate=new Date(c.value):t.dueDate=new Date(0),t.priority=l.value,t.notes=h.value.split("\n"))}get inputTitle(){return a}},g=new WeakMap,w=new WeakMap,m=new WeakMap,y=new WeakMap,f=new WeakMap;class v{constructor(t=""){this.display=p,g.set(this,t),m.set(this,new Date(0)),f.set(this,[])}set title(t){g.set(this,t)}get title(){return g.get(this)}set description(t){w.set(this,t)}get description(){return w.get(this)}set dueDate(t){m.set(this,t)}get dueDate(){return m.get(this)}set priority(t){y.set(this,t)}get priority(){return y.get(this)}set notes(t){f.set(this,t)}get notes(){return f.get(this)}}const S=new class{saveTodo(t,e){localStorage.setItem(t+".0",e.title),localStorage.setItem(t+".1",e.description);const s=e.dueDate.toISOString().slice(0,10);localStorage.setItem(t+".2",s),localStorage.setItem(t+".3",e.priority);const i=e.notes.join("\n");localStorage.setItem(t+".4",i)}loadTodo(t,e){e.title=localStorage.getItem(t+".0"),e.description=localStorage.getItem(t+".1");const s=localStorage.getItem(t+".2");e.dueDate=new Date(s),e.priority=localStorage.getItem(t+".3");const i=localStorage.getItem(t+".4");e.notes=i.split("\n")}saveList(t,e){localStorage.setItem(t+".title",e.title),localStorage.setItem(t+".active",e.active),localStorage.setItem(t+".length",e.list.count),e.list.arr.forEach((e,s)=>{let i=t+"."+s.toString();this.save(i,e)})}loadList(t,e){e.list.erase(),e.title=localStorage.getItem(t+".title"),e.active=localStorage.getItem(t+".active");const s=localStorage.getItem(t+".length");for(let i=0;i<s;i++){let s=t+"."+i.toString();const o=e.createItem();this.load(s,o)}}save(t,e){e instanceof v?this.saveTodo(t,e):this.saveList(t,e)}load(t,e){e instanceof v?this.loadTodo(t,e):this.loadList(t,e)}},k=new WeakMap,D=new WeakMap,W=new WeakMap,j=new WeakMap,M=new WeakMap,b=new WeakMap,I=new WeakMap,L=new WeakMap,T=new WeakMap,x=new WeakMap,P=new WeakMap,O=new WeakMap,q=new WeakMap,E=new WeakMap;class C{constructor(t){this.div=t,this.item=[],k.set(this,t.querySelector("#title")),D.set(this,t.querySelector("ul")),W.set(this,t.querySelector("#new")),j.set(this,t.querySelector("#delete")),x.set(this,t=>{const e=t.target,s=Number(e.dataset.index),i=this.item.active;q.get(this)(i,s),this.item.active=s,this.update()}),M.set(this,(t,e,s)=>{t.innerHTML="";let i="";0!=s.valueOf()&&(i=s.toISOString().slice(0,10));const o=document.createElement("span");o.id="duedate",o.textContent=i;const n=document.createElement("span");n.textContent=e,t.appendChild(n),t.appendChild(o)}),P.set(this,(t,e,s)=>{s==e?t.classList.add("active"):t.classList.remove("active")}),O.set(this,(t,e)=>{t.classList.remove("low"),t.classList.remove("medium"),t.classList.remove("high"),e?t.classList.add(e):t.classList.add("low")}),b.set(this,(t,e,s)=>{const i=document.createElement("li");M.get(this)(i,t.title,t.dueDate),i.dataset.index=e.toString(),O.get(this)(i,t.priority),i.addEventListener("click",x.get(this)),P.get(this)(i,e,s);D.get(this).appendChild(i)}),I.set(this,()=>{this.item.remove(),this.output(this.item)}),j.get(this).addEventListener("click",I.get(this)),L.set(this,()=>{const t=this.item.active;this.item.new();const e=this.item.active;q.get(this)(t,e);this.item.list.arr[e].display.inputTitle.value="",E.get(this),this.output(this.item)}),W.get(this).addEventListener("click",L.get(this)),T.set(this,()=>{const t=D.get(this);t.innerHTML="",D.set(this,t)}),q.set(this,(t,e)=>{if(t>=0){const e=this.item.list.arr[t];e.display.input(e)}if(e>=0){const t=this.item.list.arr[e];t.display.output(t)}}),E.set(this,()=>{const t=this.item.active;if(t>=0){const e=this.item.list.arr[t];e.display.output(e)}})}update(){E.get(this)();const t=this.div.querySelectorAll("li"),e=this.item.active;let s=null;t.forEach((t,i)=>{s=this.item.list.arr[i],M.get(this)(t,s.title,s.dueDate),O.get(this)(t,s.priority),P.get(this)(t,i,e)}),this.save()}save(){it.list.count>0&&S.save("",it)}output(t){T.get(this)(),this.item=t,t.display.inputTitle&&t.title&&(t.display.inputTitle.value=t.title);const e=t.active;t.list.arr.forEach((t,s)=>{b.get(this)(t,s,e)}),E.get(this)(),this.save()}input(t){t.title=t.display.inputTitle.value}get inputTitle(){return k.get(this)}}const _=new C(d),N=new C(u),H=new WeakMap,A=new WeakMap,B=new WeakMap;class F{constructor(t,e){this.display=e,H.set(this,t),A.set(this,new o),B.set(this,-1)}set title(t){H.set(this,t)}get title(){return H.get(this)}get list(){return A.get(this)}get active(){return B.get(this)}set active(t){B.set(this,t)}addNew(t){const e=A.get(this);e.add(t),B.set(this,e.count-1),A.set(this,e)}remove(){const t=A.get(this);t.count>0&&(t.delete(this.active),t.count<=this.active&&B.set(this,t.count-1)),A.set(this,t)}}const z=new WeakMap;class G extends F{constructor(t,e){super(t,_),this.projects=e,z.set(this,()=>{const t=this.projects.active;return this.projects.list.arr[t]===this})}get dueDate(){return new Date(0)}new(){z.get(this)()&&this.createItem()}createItem(){const t=new v;return t.description="",this.addNew(t),t}remove(){z.get(this)()&&super.remove()}}const J=new v("Todo object");J.description="First thing to make the Todo object, which stores the data for the todo item.",J.priority="low";const K=new v("Todo display");K.description="When the todo is ready, we make the todo display object. It can display the data in the todo and can input it from the user interface.",K.priority="low";const Q=new v("List");Q.description="We make a general list object, which is the base for the storage for our objects.",Q.priority="medium";const R=new v("Project & Projects");R.description="We need two different kind of list. One stores our todos, it's the Project. The other stores the different projects, we call it Projects.",R.dueDate=new Date("2020-08-19"),R.priority="high",R.notes=["We can make an extended List abstract class, which contains the extra functionality added to the List class with composition. ","Later we can derive the Project and Projects classes from this class by inheritance."];const U=new v("Display List");U.description="The DisplayList object handles the user interface for the Projects and for the active Project.",U.dueDate=new Date("2020-08-19"),U.priority="high";const V=new v("Testing");V.description="We have to make sure that everything works together seamlessly.",V.dueDate=new Date("2020-08-19"),V.priority="high";const X=new v("Duedates");X.description="We add the due date to the Project display.",X.dueDate=new Date("2020-08-20"),X.priority="low";const Y=new v("Colors");Y.description="We add the colors to the Project display.",Y.dueDate=new Date("2020-08-21"),Y.priority="low";const Z=new v("Styling");Z.description="We do the CSS styling, to make the site nice.",Z.dueDate=new Date("2020-08-22"),Z.priority="medium";const $=new v("Local Storage");$.description="We make objects be able to store their data in the browser's local storage.",$.dueDate=new Date("2020-08-23"),$.priority="high";const tt=new v("Smaple Project");tt.description="We add a sample project.",tt.dueDate=new Date("2020-08-24"),tt.priority="low";const et=new v("Bugfixes");et.description="We test again the whole thing and fix the remaining bugs.",et.dueDate=new Date("2020-08-24"),et.priority="high",et.notes=["We need to make the full surface of the list items clickable. They contain span HTML elements, which are not clickable.","","Other issue is the due date on the display. It doesn't get rendered nicely if the title is too long."];const st=[];st.push(J),st.push(K),st.push(Q),st.push(R),st.push(U),st.push(V),st.push(X),st.push(Y),st.push(Z),st.push($),st.push(tt),st.push(et);const it=new class extends F{constructor(t){super(t,N)}new(){this.createItem()}createItem(){const t=new G("",this);return super.addNew(t),t}}("allProjects");localStorage.getItem(".length")?S.load("",it):function(){const t=it.createItem();t.title="ToDoList",st.forEach(e=>{t.list.add(e)}),t.active=0}(),it.display.output(it)}]);